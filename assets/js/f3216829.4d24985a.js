"use strict";(self.webpackChunkveezoo_docs=self.webpackChunkveezoo_docs||[]).push([[8216],{2956(e,t,n){n.d(t,{A:()=>s});const s=n.p+"assets/images/bigquery-2-e035f4923e79c9cc3cac40c76702e727.png"},9289(e,t,n){n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"veezoo/getting-started/database-connections/connect-to-bigquery","title":"Connecting to Google BigQuery","description":"This guide walks you through connecting Veezoo to Google BigQuery. You\'ll learn how to set up the required IAM permissions, create a service account with a JSON key, and configure the connection in Veezoo. Before you begin, ensure you have access to a GCP project and the ability to create service accounts with the necessary BigQuery roles.","source":"@site/docs/veezoo/getting-started/database-connections/connect-to-bigquery.md","sourceDirName":"veezoo/getting-started/database-connections","slug":"/veezoo/getting-started/database-connections/google-bigquery","permalink":"/veezoo/getting-started/database-connections/google-bigquery","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Connecting to Google BigQuery","slug":"google-bigquery"},"sidebar":"veezoo","previous":{"title":"Connecting to Amazon Athena","permalink":"/veezoo/getting-started/database-connections/amazon-athena"},"next":{"title":"Connecting to Databricks","permalink":"/veezoo/getting-started/database-connections/databricks"}}');var r=n(74848),i=n(28453);const o={title:"Connecting to Google BigQuery",slug:"google-bigquery"},c=void 0,a={},d=[{value:"Required Permissions",id:"required-permissions",level:2},{value:"Creating a Service Account",id:"creating-a-service-account",level:2},{value:"Step 1: Navigate to Service Accounts",id:"step-1-navigate-to-service-accounts",level:3},{value:"Step 2: Create a new Service Account",id:"step-2-create-a-new-service-account",level:3},{value:"Step 3: Choose a name and ID for the Service Account",id:"step-3-choose-a-name-and-id-for-the-service-account",level:3},{value:"Step 4: Add the required permissions",id:"step-4-add-the-required-permissions",level:3},{value:"Step 5: Create a JSON key",id:"step-5-create-a-json-key",level:3},{value:"Step 6: Configure Veezoo",id:"step-6-configure-veezoo",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Permission Errors When Running Queries",id:"permission-errors-when-running-queries",level:3},{value:"Datasets Not Appearing",id:"datasets-not-appearing",level:3},{value:"Additional Resources",id:"additional-resources",level:3}];function l(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.p,{children:"This guide walks you through connecting Veezoo to Google BigQuery. You'll learn how to set up the required IAM permissions, create a service account with a JSON key, and configure the connection in Veezoo. Before you begin, ensure you have access to a GCP project and the ability to create service accounts with the necessary BigQuery roles."}),"\n",(0,r.jsx)(t.h2,{id:"required-permissions",children:"Required Permissions"}),"\n",(0,r.jsx)(t.p,{children:"Connecting to BigQuery requires a Service Account with a valid JSON key and the following IAM roles:"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Role"}),(0,r.jsx)(t.th,{children:"Purpose"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.strong,{children:"BigQuery Data Viewer"})," (",(0,r.jsx)(t.code,{children:"roles/bigquery.dataViewer"}),")"]}),(0,r.jsx)(t.td,{children:"Read access to tables and views"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.strong,{children:"BigQuery Metadata Viewer"})," (",(0,r.jsx)(t.code,{children:"roles/bigquery.metadataViewer"}),")"]}),(0,r.jsx)(t.td,{children:"Access to dataset and table metadata"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.strong,{children:"BigQuery Job User"})," (",(0,r.jsx)(t.code,{children:"roles/bigquery.jobUser"}),")"]}),(0,r.jsx)(t.td,{children:"Permission to run queries (create jobs)"})]})]})]}),"\n",(0,r.jsxs)(t.admonition,{title:"Note on BigQuery User role",type:"info",children:[(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.strong,{children:"BigQuery User"})," (",(0,r.jsx)(t.code,{children:"roles/bigquery.user"}),") role is a broader role that includes job creation permissions. You can use either:"]}),(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"BigQuery Job User"})," (recommended for least-privilege access), or"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"BigQuery User"})," (if you prefer a single role that covers job creation)"]}),"\n"]}),(0,r.jsxs)(t.p,{children:["In some GCP configurations\u2014particularly when data access is granted at the dataset level rather than the project level\u2014the ",(0,r.jsx)(t.strong,{children:"BigQuery Job User"})," role is explicitly required to run queries."]})]}),"\n",(0,r.jsx)(t.h2,{id:"creating-a-service-account",children:"Creating a Service Account"}),"\n",(0,r.jsx)(t.h3,{id:"step-1-navigate-to-service-accounts",children:"Step 1: Navigate to Service Accounts"}),"\n",(0,r.jsxs)(t.p,{children:["Go to Google's Cloud Console and navigate to ",(0,r.jsx)(t.strong,{children:"IAM & Admin"})," \u2192 ",(0,r.jsx)(t.strong,{children:"Service Accounts"}),":"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"IAM &amp; Admin",src:n(53639).A+"",width:"478",height:"833"})}),"\n",(0,r.jsx)(t.h3,{id:"step-2-create-a-new-service-account",children:"Step 2: Create a new Service Account"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"Create service account",src:n(2956).A+"",width:"958",height:"79"})}),"\n",(0,r.jsx)(t.h3,{id:"step-3-choose-a-name-and-id-for-the-service-account",children:"Step 3: Choose a name and ID for the Service Account"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"Service account details",src:n(14581).A+"",width:"601",height:"611"})}),"\n",(0,r.jsx)(t.h3,{id:"step-4-add-the-required-permissions",children:"Step 4: Add the required permissions"}),"\n",(0,r.jsxs)(t.p,{children:["Grant the Service Account the required roles listed above (",(0,r.jsx)(t.strong,{children:"BigQuery Data Viewer"}),", ",(0,r.jsx)(t.strong,{children:"BigQuery Metadata Viewer"}),", and ",(0,r.jsx)(t.strong,{children:"BigQuery Job User"})," or ",(0,r.jsx)(t.strong,{children:"BigQuery User"}),"):"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"Service account access",src:n(62522).A+"",width:"606",height:"727"})}),"\n",(0,r.jsx)(t.h3,{id:"step-5-create-a-json-key",children:"Step 5: Create a JSON key"}),"\n",(0,r.jsxs)(t.p,{children:["After creating the account, select it and go to ",(0,r.jsx)(t.strong,{children:"Keys"})," to create a new key:"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"Service account keys",src:n(52355).A+"",width:"511",height:"436"})}),"\n",(0,r.jsxs)(t.p,{children:["Choose ",(0,r.jsx)(t.strong,{children:"JSON"})," as the key format:"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"Service account key",src:n(74024).A+"",width:"563",height:"353"})}),"\n",(0,r.jsx)(t.h3,{id:"step-6-configure-veezoo",children:"Step 6: Configure Veezoo"}),"\n",(0,r.jsx)(t.p,{children:"Create a new Knowledge Graph in Veezoo and add all the necessary information:"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"New Knowledge Graph",src:n(22417).A+"",width:"598",height:"904"})}),"\n",(0,r.jsx)(t.p,{children:"The service account JSON key file you downloaded from GCP will look like this (with your actual values):"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-json",children:'{\n  "type": "service_account",\n  "project_id": "your-gcp-project-id",\n  "private_key_id": "abc123def456...",\n  "private_key": "-----BEGIN PRIVATE KEY-----\\nMIIEv...your-private-key...\\n-----END PRIVATE KEY-----\\n",\n  "client_email": "veezoo-bigquery@your-gcp-project-id.iam.gserviceaccount.com",\n  "client_id": "123456789012345678901",\n  "auth_uri": "https://accounts.google.com/o/oauth2/auth",\n  "token_uri": "https://oauth2.googleapis.com/token",\n  "auth_provider_x509_cert_url": "https://www.googleapis.com/oauth2/v1/certs",\n  "client_x509_cert_url": "https://www.googleapis.com/robot/v1/metadata/x509/veezoo-bigquery%40your-gcp-project-id.iam.gserviceaccount.com"\n}\n'})}),"\n",(0,r.jsxs)(t.p,{children:["Upload this JSON key file in the Veezoo configuration and set the ",(0,r.jsx)(t.strong,{children:"Location"})," field to match your BigQuery datasets (e.g., ",(0,r.jsx)(t.code,{children:"US"}),", ",(0,r.jsx)(t.code,{children:"EU"}),", or a specific region like ",(0,r.jsx)(t.code,{children:"us-east1"}),")."]}),"\n",(0,r.jsxs)(t.p,{children:["If the desired datasets are not shown, check the ",(0,r.jsx)(t.a,{href:"https://cloud.google.com/bigquery/docs/locations",children:"location"}),' of the datasets in the BigQuery console and add it to the "Location" field.']}),"\n",(0,r.jsx)(t.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsx)(t.h3,{id:"permission-errors-when-running-queries",children:"Permission Errors When Running Queries"}),"\n",(0,r.jsxs)(t.p,{children:["If you encounter errors like ",(0,r.jsx)(t.code,{children:"Access Denied: Project [project-id]: User does not have bigquery.jobs.create permission"})," or similar permission errors when trying to run queries:"]}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"Verify the BigQuery Job User role is assigned"}),": Ensure the Service Account has the ",(0,r.jsx)(t.code,{children:"roles/bigquery.jobUser"})," role at the project level. This role is required to create and run query jobs."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"Check where permissions are granted"}),":"]}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["If data access roles (Data Viewer, Metadata Viewer) are granted at the ",(0,r.jsx)(t.strong,{children:"dataset level"}),", the Job User role must still be granted at the ",(0,r.jsx)(t.strong,{children:"project level"}),"."]}),"\n",(0,r.jsx)(t.li,{children:"Job creation permissions cannot be granted at the dataset level."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"Organization policies"}),": Some GCP organizations have policies that restrict default permissions. Contact your GCP administrator to verify that the Service Account can create jobs in the project."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"datasets-not-appearing",children:"Datasets Not Appearing"}),"\n",(0,r.jsx)(t.p,{children:"If datasets are not visible in Veezoo:"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["Verify the Service Account has ",(0,r.jsx)(t.strong,{children:"BigQuery Metadata Viewer"})," access to the datasets."]}),"\n",(0,r.jsxs)(t.li,{children:["Check that the correct ",(0,r.jsx)(t.strong,{children:"Location"})," (region) is specified in Veezoo's connection settings."]}),"\n",(0,r.jsx)(t.li,{children:"Ensure the datasets exist and are not empty."}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"additional-resources",children:"Additional Resources"}),"\n",(0,r.jsxs)(t.p,{children:["For more information on BigQuery IAM roles, see the ",(0,r.jsx)(t.a,{href:"https://cloud.google.com/bigquery/docs/access-control",children:"Google Cloud BigQuery access control documentation"}),"."]})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},14581(e,t,n){n.d(t,{A:()=>s});const s=n.p+"assets/images/bigquery-3-36549301dcd2206f98478bb237aa5169.png"},22417(e,t,n){n.d(t,{A:()=>s});const s=n.p+"assets/images/bigquery-7-8310b9833b3ff70617af0a5eb8678390.png"},28453(e,t,n){n.d(t,{R:()=>o,x:()=>c});var s=n(96540);const r={},i=s.createContext(r);function o(e){const t=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(i.Provider,{value:t},e.children)}},52355(e,t,n){n.d(t,{A:()=>s});const s=n.p+"assets/images/bigquery-5-7ed826a258963d10f09aa4884a50e923.png"},53639(e,t,n){n.d(t,{A:()=>s});const s=n.p+"assets/images/bigquery-1-63f95b4114b74e0e8ff750cf7be3f61c.png"},62522(e,t,n){n.d(t,{A:()=>s});const s=n.p+"assets/images/bigquery-4-20514f846298e70236ac67e3e0bbc304.png"},74024(e,t,n){n.d(t,{A:()=>s});const s=n.p+"assets/images/bigquery-6-dce20e7880bdb3a8daf55df36010e6b8.png"}}]);
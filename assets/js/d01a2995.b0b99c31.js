"use strict";(self.webpackChunkveezoo_docs=self.webpackChunkveezoo_docs||[]).push([[4392],{20650(e,n,i){i.r(n),i.d(n,{assets:()=>h,contentTitle:()=>o,default:()=>d,frontMatter:()=>s,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"vkl/kb-layer/class/hierarchy-class","title":"Hierarchy Class","description":"Definition","source":"@site/docs/vkl/kb-layer/class/hierarchy-class.md","sourceDirName":"vkl/kb-layer/class","slug":"/vkl/kb-layer/class/hierarchy-class","permalink":"/vkl/kb-layer/class/hierarchy-class","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":9,"frontMatter":{"title":"Hierarchy Class","sidebar_position":9},"sidebar":"vkl","previous":{"title":"\u2699\ufe0f display_with","permalink":"/vkl/kb-layer/class/display_with"},"next":{"title":"Ordinal Class","permalink":"/vkl/kb-layer/class/ordinal-class"}}');var a=i(74848),r=i(28453);const s={title:"Hierarchy Class",sidebar_position:9},o=void 0,h={},l=[{value:"Definition",id:"definition",level:2},{value:"Usage",id:"usage",level:2},{value:"Hierarchy not in the database",id:"hierarchy-not-in-the-database",level:3},{value:"Hierarchy present in the database",id:"hierarchy-present-in-the-database",level:3}];function c(e){const n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h2,{id:"definition",children:"Definition"}),"\n",(0,a.jsx)(n.p,{children:"Sometimes the entities of a class form a hierarchy, which is either defined in the database or explicitly in the knowledge graph."}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Example:"})," South Europe is a region that is part of Europe, forming a hierarchy."]}),"\n",(0,a.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,a.jsx)(n.p,{children:"To define it, you will need to first add a couple of tags to your class."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:'kb {\n    class Region {\n        name.en: "Region"\n        \n        tag: [\n            KB_HierarchyClass,\n            KB_NonAggregatedHierarchyClass\n        ]\n\n        ...\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"hierarchy-not-in-the-database",children:"Hierarchy not in the database"}),"\n",(0,a.jsx)(n.p,{children:"If your hierarchy is not defined in your database (e.g. there is a South Europe, but no Europe in the database), you can manually define the hierarchy over Studio."}),"\n",(0,a.jsx)(n.p,{children:"To do this, open the entities file for your class in Studio. You can find it by clicking on the list icon on the Studio sidebar next to the class name."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"Entities File",src:i(43625).A+""})}),"\n",(0,a.jsxs)(n.p,{children:["As an example, let's say you've opened the ",(0,a.jsx)(n.strong,{children:"entities file"})," for the Region class and saw this:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:'kb.Region {\n\n    entity South_Europe_123 {\n        name.en: "South Europe"\n        \n        id: "123"\n    }\n    \n    entity North_Europe_124 {\n        name.en: "North Europe"\n        \n        id: "124"\n    }\n\n    entity Central_Europe_125 {\n        name.en: "Central Europe"\n        \n        id: "125"\n    }\n}\n\n'})}),"\n",(0,a.jsx)(n.p,{children:'Now, assume we want to add new hierarchy nodes "Europe" and "EMEA" in order to model a hierarchy of regions.'}),"\n",(0,a.jsxs)(n.p,{children:['To this end, we manually add two new entities "Europe" and "EMEA", and let the ',(0,a.jsx)(n.code,{children:"parent"}),' attribute of the respective child entities refer to their parents  (e.g., "Europe" is the parent of "South Europe"). Note that:']}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["All leafs of the hierarchy (i.e., the entities without any children) must be assigned the tag ",(0,a.jsx)(n.code,{children:"KB_HierarchyLeaf"})]}),"\n",(0,a.jsxs)(n.li,{children:["All inner nodes of the hierarchy must be assigned the tag ",(0,a.jsx)(n.code,{children:"KB_HierarchyNode"})]}),"\n",(0,a.jsxs)(n.li,{children:['The new entities "Europe" and "EMEA" do not correspond to any value stored in the database, hence we do not set an ',(0,a.jsx)(n.code,{children:"id"})," attribute for them. Such entities are called ",(0,a.jsx)(n.em,{children:"virtual entities"}),"."]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Resulting entities file:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:'kb.Region {\n\n    entity South_Europe_123 {\n        name.en: "South Europe"\n        \n        // Add this to all hierarchy leaves\n        tag: KB_HierarchyLeaf\n\n        // Specify the node in the next level of the hierarchy\n        parent: Europe\n\n        id: "123"\n    }\n    \n    entity North_Europe_124 {\n        name.en: "North Europe"\n        \n        // Add this to all hierarchy leaves\n        tag: KB_HierarchyLeaf\n\n        // Specify the node in the next level of the hierarchy\n        parent: Europe\n\n        id: "124"\n    }\n\n    entity Central_Europe_125 {\n        name.en: "Central Europe"\n        \n        // Add this to all hierarchy leaves\n        tag: KB_HierarchyLeaf\n\n        // Specify the node in the next level of the hierarchy\n        parent: Europe\n\n        id: "125"\n    }    \n\n    // Add this new entity manually\n    entity EMEA {\n        name.en: "EMEA"\n\n        // Add this to all inner hierarchy nodes\n        tag: KB_HierarchyNode\n        \n        // NOTE: No id is defined, as there is no corresponding value for "EMEA" in the data\n    }\n\n    // Add this new entity manually\n    entity Europe {\n        name.en: "Europe"\n\n        // Add this to all inner hierarchy nodes\n        tag: KB_HierarchyNode\n\n        // The hierarchy can have multiple levels\n        parent: EMEA\n        \n        // NOTE: No id is defined, as there is no corresponding value for "Europe" in the data\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"hierarchy-present-in-the-database",children:"Hierarchy present in the database"}),"\n",(0,a.jsxs)(n.p,{children:["If the hierarchy is present in the database, you can use it to automatically generate the ",(0,a.jsx)(n.code,{children:"parent"})," attributes of the entities."]}),"\n",(0,a.jsxs)(n.p,{children:["To achieve this, ensure your database includes a column that specifies the parent for each row; rows without a parent should have ",(0,a.jsx)(n.code,{children:"NULL"})," in this column. Then, you can add the ",(0,a.jsx)(n.code,{children:"hierarchy_column"})," field to your class definition:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:'import: [\n    db.public.region\n]\n\nkb {\n    class Region {\n        name.en: "Region"\n        \n        tag: [\n            KB_HierarchyClass,\n            KB_NonAggregatedHierarchyClass\n        ]\n\n        hierarchy_column: region.parent_region\n\n        ...\n    }\n}\n'})}),"\n",(0,a.jsxs)(n.p,{children:["Classes with entities defined using ",(0,a.jsx)(n.a,{href:"/vkl/kb-layer/class/sql/#custom-entities-sql-for-hierarchies",children:"custom entities sql"})," can also have automatically generated hierarchies. For more details, please refer to that page."]})]})}function d(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},28453(e,n,i){i.d(n,{R:()=>s,x:()=>o});var t=i(96540);const a={},r=t.createContext(a);function s(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),t.createElement(r.Provider,{value:n},e.children)}},43625(e,n,i){i.d(n,{A:()=>t});const t="data:image/png;base64,dmVyc2lvbiBodHRwczovL2dpdC1sZnMuZ2l0aHViLmNvbS9zcGVjL3YxCm9pZCBzaGEyNTY6YTI4NDUwMjlhYmExNTM4ZjYwYmFiOWRkZjE3NjM5YzExNDYwZDk0NjkwZGE3ODBmMWU5ZTk1ZmI0MGY0YTRlZgpzaXplIDgwNDEK"}}]);
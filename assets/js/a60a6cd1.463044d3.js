"use strict";(self.webpackChunkveezoo_docs=self.webpackChunkveezoo_docs||[]).push([[4155],{28453(e,n,s){s.d(n,{R:()=>r,x:()=>l});var o=s(96540);const i={},t=o.createContext(i);function r(e){const n=o.useContext(t);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),o.createElement(t.Provider,{value:n},e.children)}},40671(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>a});const o=JSON.parse('{"id":"vkl/kb-layer/relationship/sql","title":"sql","description":"Definition","source":"@site/docs/vkl/kb-layer/relationship/sql.md","sourceDirName":"vkl/kb-layer/relationship","slug":"/vkl/kb-layer/relationship/sql","permalink":"/vkl/kb-layer/relationship/sql","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_label":"\u2699\ufe0f sql","sidebar_position":4},"sidebar":"vkl","previous":{"title":"\u2699\ufe0f to_synonym","permalink":"/vkl/kb-layer/relationship/to_synonym"},"next":{"title":"Attributes","permalink":"/vkl/kb-layer/attribute/"}}');var i=s(74848),t=s(28453);const r={sidebar_label:"\u2699\ufe0f sql",sidebar_position:4},l=void 0,c={},a=[{value:"Definition",id:"definition",level:2},{value:"Usage",id:"usage",level:2}];function d(e){const n={a:"a",code:"code",em:"em",h2:"h2",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"definition",children:"Definition"}),"\n",(0,i.jsx)(n.p,{children:"A relationship in VKL describes how classes relate to each other."}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"sql"})," property specifies how these classes connect to each other in the database. These are usually foreign keys in your database."]}),"\n",(0,i.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,i.jsxs)(n.p,{children:["Let's say we have the following tables: ",(0,i.jsx)(n.code,{children:"CUSTOMER(id, name)"})," and ",(0,i.jsx)(n.code,{children:"ORDER(id, customer_id, total_order)"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["In this case of Foreign Keys, the ",(0,i.jsx)(n.code,{children:"sql"})," of the connecting classes (e.g. ",(0,i.jsx)(n.code,{children:"kb.Order"})," and ",(0,i.jsx)(n.code,{children:"kb.Customer"}),") are not both in the same table."]}),"\n",(0,i.jsxs)(n.p,{children:["Now, ",(0,i.jsx)(n.code,{children:"customer_id"})," is a foreign key pointing to the ",(0,i.jsx)(n.code,{children:"CUSTOMER"})," table. This is how our new classes and relationship will look like."]}),"\n",(0,i.jsxs)(n.p,{children:["File: ",(0,i.jsx)(n.em,{children:"hitchhiker/knowledge-base/classes/Customer.vkl"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'import: [\n    db.postgres.movie_db.public.CUSTOMER\n]\n\nkb {\n\n    class Customer {\n    \tname.en: "Customer"\n\n        sql: "${CUSTOMER.id}"\n        name_sql: "${CUSTOMER.name}"\n    }\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["File: ",(0,i.jsx)(n.em,{children:"hitchhiker/knowledge-base/classes/Order.vkl"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'import: [\n    db.postgres.movie_db.public.ORDER\n]\n\nkb {\n\n    class Order {\n    \tname.en: "Order"\n        sql: "${ORDER.id}"\n\n        relationship from_Customer {\n            to: kb.Customer\n            sql: "${ORDER.customer_id}"\n        }\n\n        ...\n    }\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["The relationship ",(0,i.jsx)(n.code,{children:"from_Customer"})," has a ",(0,i.jsx)(n.code,{children:"sql"})," defined that uses the foreign key column ",(0,i.jsx)(n.code,{children:"customer_id"}),". Since the ",(0,i.jsx)(n.code,{children:"to"})," is set to ",(0,i.jsx)(n.code,{children:"kb.Customer"}),", Veezoo can now correctly do the join using the ",(0,i.jsx)(n.code,{children:"sql"})," from the relationship and the ",(0,i.jsx)(n.code,{children:"sql"})," from the referenced class ",(0,i.jsx)(n.code,{children:"kb.Customer"}),", like this: ",(0,i.jsx)(n.code,{children:"${ORDER.customer_id} = ${CUSTOMER.id}"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Keep in mind that ",(0,i.jsx)(n.code,{children:"sql"}),' accepts any kind of SQL expression (e.g. concatenation of multiple columns) and therefore the join does not need to be of the type "column A = column B".\nFor joins that need to go over multiple tables or have a more advanced SQL expression, refer to ',(0,i.jsx)(n.a,{href:"/vkl/kb-layer/general/join",children:"join"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);
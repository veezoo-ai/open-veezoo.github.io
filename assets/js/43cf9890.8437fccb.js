"use strict";(self.webpackChunkveezoo_docs=self.webpackChunkveezoo_docs||[]).push([[4359],{28453(e,n,i){i.d(n,{R:()=>a,x:()=>l});var s=i(96540);const t={},r=s.createContext(t);function a(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),s.createElement(r.Provider,{value:n},e.children)}},59173(e,n,i){i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>x,frontMatter:()=>l,metadata:()=>s,toc:()=>h});const s=JSON.parse('{"id":"veezoo/single-sign-on/user-attributes","title":"User attributes","description":"When using single sign-on with SAML or JWT, you can define some attributes of users in Veezoo based on values from the authentication token:","source":"@site/docs/veezoo/single-sign-on/user-attributes.mdx","sourceDirName":"veezoo/single-sign-on","slug":"/veezoo/single-sign-on/user-attributes","permalink":"/veezoo/single-sign-on/user-attributes","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"title":"User attributes","sidebar_position":3},"sidebar":"veezoo","previous":{"title":"JWT","permalink":"/veezoo/single-sign-on/jwt"},"next":{"title":"Viewer and Creator Users","permalink":"/veezoo/authorization/viewer-creator-users"}}');var t=i(74848),r=i(28453),a=i(86025);const l={title:"User attributes",sidebar_position:3},d=void 0,o={},h=[{value:"Attributes",id:"attributes",level:2},{value:"Mapping",id:"mapping",level:2},{value:"Value",id:"value",level:3},{value:"Condition",id:"condition",level:3},{value:"Description",id:"description",level:3},{value:"Syntax",id:"syntax",level:2},{value:"String",id:"string",level:3},{value:"Array",id:"array",level:3},{value:"Variable",id:"variable",level:3},{value:"Condition",id:"condition-1",level:3},{value:"Examples",id:"examples",level:3}];function c(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"When using single sign-on with SAML or JWT, you can define some attributes of users in Veezoo based on values from the authentication token:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"when using SAML: based on attributes from the SAML assertion"}),"\n",(0,t.jsx)(n.li,{children:"when using JWT: based on claims from the JWT"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"attributes",children:"Attributes"}),"\n",(0,t.jsx)(n.p,{children:"The following attributes can be configured:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Attribute"}),(0,t.jsx)(n.th,{children:"Description"}),(0,t.jsx)(n.th,{children:"Multi-valued"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Tenant"})}),(0,t.jsx)(n.td,{children:"The tenant the user belongs to (only available when using multi-tenancy)"}),(0,t.jsx)(n.td,{children:"no"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Type"})}),(0,t.jsx)(n.td,{children:"The user's type, i.e. if the user is a Creator or a Viewer"}),(0,t.jsx)(n.td,{children:"no"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"First name"})}),(0,t.jsx)(n.td,{children:"The user's first name"}),(0,t.jsx)(n.td,{children:"no"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Last name"})}),(0,t.jsx)(n.td,{children:"The user's last name"}),(0,t.jsx)(n.td,{children:"no"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"E-mail"})}),(0,t.jsx)(n.td,{children:"The user's e-mail address"}),(0,t.jsx)(n.td,{children:"no"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Language"})}),(0,t.jsx)(n.td,{children:"The user's preferred language, if supported by a given knowledge graph"}),(0,t.jsx)(n.td,{children:"no"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Roles"})}),(0,t.jsx)(n.td,{children:"The user's roles"}),(0,t.jsx)(n.td,{children:"yes"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"mapping",children:"Mapping"}),"\n",(0,t.jsxs)(n.p,{children:["For each user attribute, you can define one or more mappings that determine the value of the attribute. When a user authenticates, i.e. opens or reloads Veezoo in their browser, the mappings are evaluated and the corresponding user attributes are ",(0,t.jsx)(n.strong,{children:"updated"})," accordingly."]}),"\n",(0,t.jsx)(n.p,{children:"Mappings are evaluated in order from top to bottom:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["for ",(0,t.jsx)(n.strong,{children:"single-valued"})," user attributes, the ",(0,t.jsx)(n.strong,{children:"first matching mapping"})," us used"]}),"\n",(0,t.jsxs)(n.li,{children:["for ",(0,t.jsx)(n.strong,{children:"multi-valued"})," user attributes, ",(0,t.jsx)(n.strong,{children:"all matching mappings"})," are applied."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Each mapping consists of the following fields:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"User attribute mapping",src:i(77180).A+""})}),"\n",(0,t.jsx)(n.h3,{id:"value",children:"Value"}),"\n",(0,t.jsx)(n.p,{children:"The value to assign to the user attribute, if the condition holds."}),"\n",(0,t.jsxs)(n.p,{children:["For some user attributes (e.g. type), the permitted values are predefined and can be selected using a dropdown. For other attributes (e.g. first name), the entered value must be a ",(0,t.jsx)(n.a,{href:"#variable",children:"variable"})," or a ",(0,t.jsx)(n.a,{href:"#string",children:"string"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"condition",children:"Condition"}),"\n",(0,t.jsxs)(n.p,{children:["The condition which determines if the mapping should be used ",(0,t.jsx)(n.em,{children:"(optional)"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["If set, then the mapping's value is only assigned to the user attribute if the condition holds, else the mapping is ignored. The entered value must be a ",(0,t.jsx)(n.a,{href:"#condition-1",children:"condition"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"description",children:"Description"}),"\n",(0,t.jsxs)(n.p,{children:["The description for the mapping ",(0,t.jsx)(n.em,{children:"(optional)"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"syntax",children:"Syntax"}),"\n",(0,t.jsx)(n.p,{children:"The following simple syntax can be used to express conditions and reference attributes from the authentication token (i.e. SAML assertion attributes or JWT claims)."}),"\n",(0,t.jsx)(n.h3,{id:"string",children:"String"}),"\n",(0,t.jsx)(n.p,{children:"A string is enclosed in single quotes."}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Example:"})," ",(0,t.jsx)(n.code,{children:"'abc'"})]}),"\n",(0,t.jsx)(n.h3,{id:"array",children:"Array"}),"\n",(0,t.jsx)(n.p,{children:"An array encloses a comma-separated list of strings in brackets."}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Example:"})," ",(0,t.jsx)(n.code,{children:"['a', 'b', 'c']"})]}),"\n",(0,t.jsx)(n.h3,{id:"variable",children:"Variable"}),"\n",(0,t.jsx)(n.p,{children:"A variable references an attribute from the authentication token, i.e. a SAML assertion attribute or JWT claim)."}),"\n",(0,t.jsx)(n.p,{children:"If the variable contains non-alphanumerical characters, then it needs to be enclosed in backticks."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Examples:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"firstName"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"`first-name`"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"`http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname`"})}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"condition-1",children:"Condition"}),"\n",(0,t.jsx)(n.p,{children:"A condition consists of a left-hand side, an operator and a right-hand side."}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Operator"}),(0,t.jsx)(n.th,{children:"Name"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"=="})}),(0,t.jsx)(n.td,{children:"Equality"}),(0,t.jsx)(n.td,{children:"Evaluates to true if the left-hand side is equal to the right-hand side"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"!="})}),(0,t.jsx)(n.td,{children:"Non-equality"}),(0,t.jsx)(n.td,{children:"Evaluates to true if the left-hand side is not equal to the right-hand side"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"IN"})}),(0,t.jsx)(n.td,{children:"Containment"}),(0,t.jsx)(n.td,{children:"Evaluates to true if the left-hand side is contained in the right-hand side"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"NOT IN"})}),(0,t.jsx)(n.td,{children:"Non-containment"}),(0,t.jsx)(n.td,{children:"Evaluates to true if the left-hand side is not contained in the right-hand side"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"AND"})," / ",(0,t.jsx)(n.code,{children:"&&"})]}),(0,t.jsx)(n.td,{children:"Conjunction"}),(0,t.jsx)(n.td,{children:"Evaluates to true if both the left-hand side and right-hand side evaluate to true"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"OR"})," / ",(0,t.jsx)("code",{children:"|"})]}),(0,t.jsx)(n.td,{children:"Disjunction"}),(0,t.jsx)(n.td,{children:"Evaluates to true if either of the left-hand side and right-hand side evaluate to true"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"NO"})," / ",(0,t.jsx)(n.code,{children:"!"})]}),(0,t.jsx)(n.td,{children:"Negation"}),(0,t.jsx)(n.td,{children:"Negates the result of the condition"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Examples:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Equality:",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.code,{children:"language == 'fr'"}),(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.code,{children:"departmentCodes == ['D1', 'D2']"})]}),"\n",(0,t.jsxs)(n.li,{children:["Non-equality:",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.code,{children:"language != 'fr'"}),(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.code,{children:"departmentCodes != ['D1', 'D2']"})]}),"\n",(0,t.jsxs)(n.li,{children:["Containment:",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.code,{children:"departmentCode IN ['D1', 'D2', 'D3']"}),(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.code,{children:"'D1' IN departmentCodes"})]}),"\n",(0,t.jsxs)(n.li,{children:["Non-containment:",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.code,{children:"departmentCode NOT IN ['D1', 'D2', 'D3']"}),(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.code,{children:"'D1' NOT IN departmentCodes"})]}),"\n",(0,t.jsxs)(n.li,{children:["Conjunction:",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.code,{children:"language == 'fr' && departmentCode IN ['D1', 'D2', 'D3']"})]}),"\n",(0,t.jsxs)(n.li,{children:["Disjunction:",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.code,{children:"language == 'fr' || departmentCode IN ['D1', 'D2', 'D3']"})]}),"\n",(0,t.jsxs)(n.li,{children:["Negation:",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.code,{children:"NOT language == 'fr'"}),(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.code,{children:"! language == 'fr'"})]}),"\n",(0,t.jsxs)(n.li,{children:["Parentheses:",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.code,{children:"!(language == 'fr')"}),(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.code,{children:"((a == '1' OR a == '2') AND NOT(b == '3'))"})]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["A string is considered to be equal to an array holding exactly that string\nE.g. ",(0,t.jsx)(n.code,{children:"'a' == ['a']"})," holds true"]}),"\n",(0,t.jsxs)(n.li,{children:["The left-hand side of a (non-)containment condition can be an array\nE.g. ",(0,t.jsx)(n.code,{children:"['b', 'a'] IN ['a', 'b', 'c']"})," holds true"]}),"\n"]})}),"\n",(0,t.jsx)(n.h3,{id:"examples",children:"Examples"}),"\n",(0,t.jsx)(n.p,{children:"Consider the following SAML assertion:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'<samlp:Response ...>\n  ...\n    <saml:AttributeStatement>\n      <saml:Attribute Name="firstName" ...>\n        <saml:AttributeValue ...>John</saml:AttributeValue>\n      </saml:Attribute>\n      <saml:Attribute Name="departmentCode" ...>\n        <saml:AttributeValue ...>D1</saml:AttributeValue>\n      </saml:Attribute>\n      <saml:Attribute Name="language" ...>\n        <saml:AttributeValue ...>fr</saml:AttributeValue>\n      </saml:Attribute>\n      <saml:Attribute Name="roles" ...>\n        <saml:AttributeValue ...>internal-admin</saml:AttributeValue>\n        <saml:AttributeValue ...>veezoo-admin</saml:AttributeValue>\n      </saml:Attribute>\n    </saml:AttributeStatement>\n  ...\n</samlp:Response>\n'})}),"\n",(0,t.jsx)(n.p,{children:"The following examples illustrate some mappings and what they evaluate to given the above SAML assertion:"}),"\n",(0,t.jsx)("img",{alt:"Mapping example 1",width:"700",src:(0,a.default)("/img/single-sign-on/saml/mapping-example-1.png")}),"\n",(0,t.jsxs)(n.p,{children:["\u2192 The mapping matches and evaluates to ",(0,t.jsx)(n.code,{children:"abc"})]}),"\n",(0,t.jsx)("img",{alt:"Mapping example 2",width:"700",src:(0,a.default)("/img/single-sign-on/saml/mapping-example-2.png")}),"\n",(0,t.jsxs)(n.p,{children:["\u2192 The mapping matches and evaluates to ",(0,t.jsx)(n.code,{children:"John"})]}),"\n",(0,t.jsx)("img",{alt:"Mapping example 3",width:"700",src:(0,a.default)("/img/single-sign-on/saml/mapping-example-3.png")}),"\n",(0,t.jsxs)(n.p,{children:["\u2192 The mapping matches and evaluates to ",(0,t.jsx)(n.code,{children:"John"})]}),"\n",(0,t.jsx)("img",{alt:"Mapping example 4",width:"700",src:(0,a.default)("/img/single-sign-on/saml/mapping-example-4.png")}),"\n",(0,t.jsx)(n.p,{children:"\u2192 The mapping doesn't match"}),"\n",(0,t.jsx)("img",{alt:"Mapping example 5",width:"700",src:(0,a.default)("/img/single-sign-on/saml/mapping-example-5.png")}),"\n",(0,t.jsxs)(n.p,{children:["\u2192 The mapping matches and evaluates to ",(0,t.jsx)(n.code,{children:"Creator"})]}),"\n",(0,t.jsx)("img",{alt:"Mapping example 6",width:"700",src:(0,a.default)("/img/single-sign-on/saml/mapping-example-6.png")}),"\n",(0,t.jsxs)(n.p,{children:["\u2192 The mapping matches and evaluates to ",(0,t.jsx)(n.code,{children:"Creator"})]}),"\n",(0,t.jsx)("img",{alt:"Mapping example 7",width:"700",src:(0,a.default)("/img/single-sign-on/saml/mapping-example-7.png")}),"\n",(0,t.jsx)(n.p,{children:"\u2192 The mapping doesn't match"}),"\n",(0,t.jsx)("img",{alt:"Mapping example 8",width:"700",src:(0,a.default)("/img/single-sign-on/saml/mapping-example-8.png")}),"\n",(0,t.jsxs)(n.p,{children:["\u2192 The mapping matches and evaluates to ",(0,t.jsx)(n.code,{children:"Fran\xe7ais"})]}),"\n",(0,t.jsx)("img",{alt:"Mapping example 9",width:"700",src:(0,a.default)("/img/single-sign-on/saml/mapping-example-9.png")}),"\n",(0,t.jsx)(n.p,{children:"\u2192 The mapping matches and evaluates to the empty string"})]})}function x(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},77180(e,n,i){i.d(n,{A:()=>s});const s="data:image/png;base64,dmVyc2lvbiBodHRwczovL2dpdC1sZnMuZ2l0aHViLmNvbS9zcGVjL3YxCm9pZCBzaGEyNTY6ZDJjNzY5YTBkZWIwYmM0Y2U4NGQwMTA5YzBmNTg1NWUxOGEyZmIzYWQxN2NlZmZmZTk3MzY5YmRmZWM3MjNhNQpzaXplIDMwOTA3Cg=="}}]);
"use strict";(self.webpackChunkveezoo_docs=self.webpackChunkveezoo_docs||[]).push([[2747],{28453(e,t,o){o.d(t,{R:()=>r,x:()=>i});var n=o(96540);const s={},a=n.createContext(s);function r(e){const t=n.useContext(a);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),n.createElement(a.Provider,{value:t},e.children)}},68893(e,t,o){o.r(t),o.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>r,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"veezoo/getting-started/database-connections/connect-to-postgres","title":"Connecting to Postgres","description":"The following guide shows how to connect Veezoo to a PostgreSQL database using a dedicated read-only user.","source":"@site/docs/veezoo/getting-started/database-connections/connect-to-postgres.md","sourceDirName":"veezoo/getting-started/database-connections","slug":"/veezoo/getting-started/database-connections/postgres","permalink":"/veezoo/getting-started/database-connections/postgres","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Connecting to Postgres","slug":"postgres"},"sidebar":"veezoo","previous":{"title":"Connecting to Databricks","permalink":"/veezoo/getting-started/database-connections/databricks"},"next":{"title":"Connecting to Amazon Redshift","permalink":"/veezoo/getting-started/database-connections/amazon-redshift"}}');var s=o(74848),a=o(28453);const r={title:"Connecting to Postgres",slug:"postgres"},i=void 0,c={},d=[{value:"Prerequisites",id:"prerequisites",level:3},{value:"Creating a Read-Only PostgreSQL User",id:"creating-a-read-only-postgresql-user",level:3},{value:"Configuring the Connection in Veezoo",id:"configuring-the-connection-in-veezoo",level:3}];function l(e){const t={a:"a",code:"code",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{children:"The following guide shows how to connect Veezoo to a PostgreSQL database using a dedicated read-only user."}),"\n",(0,s.jsx)(t.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsx)(t.p,{children:"Make sure you have the following details ready:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"PostgreSQL host name or IP address"}),"\n",(0,s.jsxs)(t.li,{children:["Port number (default: ",(0,s.jsx)(t.code,{children:"5432"}),")"]}),"\n",(0,s.jsx)(t.li,{children:"Database name you want to expose to Veezoo"}),"\n",(0,s.jsx)(t.li,{children:"Credentials for a PostgreSQL user with read-only access (see next section)"}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"creating-a-read-only-postgresql-user",children:"Creating a Read-Only PostgreSQL User"}),"\n",(0,s.jsxs)(t.p,{children:["We recommend creating a dedicated user for Veezoo with the minimum permissions needed to read data. Run the commands below from ",(0,s.jsx)(t.code,{children:"psql"})," or similar tool as a user with permissions to create users (for example, ",(0,s.jsx)(t.code,{children:"postgres"}),"). Replace the placeholders (",(0,s.jsx)(t.code,{children:"your_database"}),", ",(0,s.jsx)(t.code,{children:"your_schema"})," etc) with the values that match your environment."]}),"\n",(0,s.jsx)(t.p,{children:"Save the credentials for the user in a password manager so it's stored securely."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"CREATE ROLE veezoo_readonly WITH LOGIN PASSWORD 'choose_a_strong_password';\n\n-- Allow the user to connect to the database the data lives in.\nGRANT CONNECT ON DATABASE your_database TO veezoo_readonly;\n\n-- Switch to the target database to grant schema-level privileges. If not using psql, switch database in the preferred way of your tool.\n\\c your_database\n\n-- Allow usage of the schema that contains the tables you want to expose.\nGRANT USAGE ON SCHEMA your_schema TO veezoo_readonly;\n\n-- Grant read access to existing tables.\nGRANT SELECT ON ALL TABLES IN SCHEMA your_schema TO veezoo_readonly;\n\n-- Ensure future tables become readable automatically.\nALTER DEFAULT PRIVILEGES IN SCHEMA your_schema\n    GRANT SELECT ON TABLES TO veezoo_readonly;\n"})}),"\n",(0,s.jsxs)(t.p,{children:["If you need to expose multiple schemas, repeat the ",(0,s.jsx)(t.code,{children:"GRANT"})," and ",(0,s.jsx)(t.code,{children:"ALTER DEFAULT PRIVILEGES"})," statements for each schema, or create a different user."]}),"\n",(0,s.jsx)(t.h3,{id:"configuring-the-connection-in-veezoo",children:"Configuring the Connection in Veezoo"}),"\n",(0,s.jsxs)(t.p,{children:["Follow the UI steps described in ",(0,s.jsx)(t.a,{href:"/veezoo/getting-started/connect-new-dataset#connect-to-a-sql-database",children:"Connect to a SQL database"}),". Use the host, port and the read-only credentials created above when filling out the form."]})]})}function h(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}}}]);
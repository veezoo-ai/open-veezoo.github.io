"use strict";(self.webpackChunkveezoo_docs=self.webpackChunkveezoo_docs||[]).push([[7794],{10983(e,t,n){n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>u,frontMatter:()=>o,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"vkl/kb-layer/attribute/is_snapshot_date","title":"is_snapshot_date","description":"Definition","source":"@site/docs/vkl/kb-layer/attribute/is_snapshot_date.md","sourceDirName":"vkl/kb-layer/attribute","slug":"/vkl/kb-layer/attribute/is_snapshot_date","permalink":"/vkl/kb-layer/attribute/is_snapshot_date","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_label":"\u2699\ufe0f is_snapshot_date","sidebar_position":5},"sidebar":"vkl","previous":{"title":"\u2699\ufe0f quantity_of","permalink":"/vkl/kb-layer/attribute/quantity_of"},"next":{"title":"onto.ID","permalink":"/vkl/kb-layer/attribute/extends/id"}}');var s=n(74848),i=n(28453);const o={sidebar_label:"\u2699\ufe0f is_snapshot_date",sidebar_position:5},r=void 0,l={},d=[{value:"Definition",id:"definition",level:2},{value:"Usage",id:"usage",level:2},{value:"Behavior",id:"behavior",level:3}];function h(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h2,{id:"definition",children:"Definition"}),"\n",(0,s.jsxs)(t.p,{children:["Setting the property ",(0,s.jsx)(t.code,{children:"is_snapshot_date"})," on a ",(0,s.jsx)(t.a,{href:"/vkl/kb-layer/attribute/types/date",children:"date"}),' attribute will tell Veezoo to interpret dates as points in time, i.e. "2020" will be interpreted as "end of 2020".\nThis is useful in particular for historized data that contains data from the past as well.\nVeezoo will then answer questions with specific points in time (i.e. on snapshots of the data), by default with the current time.']}),"\n",(0,s.jsxs)(t.p,{children:['For example, let\'s say we have a date attribute "active date" on the class "customers".\nNormally, the question "Customers active last year" would be answered as "Customers that were active at any point last year".\nHowever, this can lead to overcounting customers, as if some customers became inactive during the year while others became active, at no point in time there was that number of customers.\nThus, it would be more appropriate to return the "Customers that were active at the end of last year", which is exactly how Veezoo will interpret the question if ',(0,s.jsx)(t.code,{children:"is_snapshot_date: true"})," is set."]}),"\n",(0,s.jsx)(t.h2,{id:"usage",children:"Usage"}),"\n",(0,s.jsxs)(t.p,{children:["Configuring a snapshot date is straightforward, just set ",(0,s.jsx)(t.code,{children:"is_snapshot_date: true"})," on the ",(0,s.jsx)(t.a,{href:"/vkl/kb-layer/attribute/types/date",children:"date"})," attributes that should have this behavior."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:'kb {\n    class Customer {\n        /* ... */\n\n        // is_snapshot_date is most often used with date intervals\n    \tdate_interval ActiveDate {\n            /* ... */\n    \t\tis_snapshot_date: true\n            phrase_name: "active"\n    \t}\n    }\n}\n'})}),"\n",(0,s.jsx)(t.admonition,{type:"tip",children:(0,s.jsxs)(t.p,{children:["Set the ",(0,s.jsx)(t.a,{href:"/vkl/kb-layer/attribute/types/date#phrase_name",children:"phrase_name"}),' to get a more natural explanation of the answer, for example "Customer active by the end of 2020".']})}),"\n",(0,s.jsxs)(t.p,{children:["Another typical case where ",(0,s.jsx)(t.code,{children:"is_snapshot_date"}),' would be used is a historized property, for example the status of a customer that can change over time (e.g. "John Doe" has status "New Customer" beginning from January, but status "Lost Customer" beginning from June).\nThen we would usually also want for a question like "New customers last month" to return only the customers that had status "New Customer" at the end of last month, again to avoid overcounting.']}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:'kb {\n    class Customer {\n        /* ... */\n    }\n\n    class CustomerStatusHistory {\n        name.en: "Customer Status History"\n        // Show only the attributes of CustomerStatusHistory, the class itself has nothing to show\n        tag: KB_ShowOnlyRepresenters\n        \n        from_table: "${CUSTOMER_STATUS_HISTORY}"\n\n        class Status {\n            name.en: "Status"\n            \n            sql: "${CUSTOMER_STATUS_HISTORY}.status"\n        }\n        relationship of_Customer {\n            to: kb.Customer\n            \n            sql: "${CUSTOMER_STATUS_HISTORY}.customer_id"\n        }\n        \n        date_interval ValidDate {\n            name: "Valid Date"\n            \n            datetime_format: DayFormat\n            definition: "interval(this.ValidFrom, this.ValidTo)"\n            is_snapshot_date: true\n        }\n        date ValidFrom {\n            name.en: "Valid From"\n            hidden: true\n            \n            sql: "${CUSTOMER_STATUS_HISTORY}.valid_from"\n            \n            datetime_format: DayFormat\n        }\n        date ValidTo {\n            name.en: "Valid To"\n            hidden: true\n            \n            sql: "${CUSTOMER_STATUS_HISTORY}.valid_to"\n            \n            datetime_format: DayFormat\n        }\n    }\n}\n'})}),"\n",(0,s.jsx)(t.h3,{id:"behavior",children:"Behavior"}),"\n",(0,s.jsx)(t.p,{children:"Veezoo will by default try to interpret dates as points in time for snapshot dates."}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:['Specific dates expressions like "January", "last year" or also "2020 vs 2021" will be interpreted as the end of that date expression',"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:'In contrast, for the normal non-snapshot dates these would be interpreted as e.g. "at any point in January"'}),"\n",(0,s.jsx)(t.li,{children:"Grouping by e.g. month will similarly be resolved to the end of each month"}),"\n",(0,s.jsx)(t.li,{children:'"Before" and "after" will be interpreted as "just before" or "just after", e.g. "before 2020" will be interpreted as "at the end of 2019"'}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.li,{children:"If no date is specified, snapshot dates will be restricted to the current time by default, meaning the current state will be used"}),"\n",(0,s.jsx)(t.li,{children:'For certain questions where it makes sense, Veezoo will not interpret dates as points in time even for snapshot dates, but interpret them as usually as "at any point in time", e.g. if a user explicitly asks for "at any point in time" or for date ranges'}),"\n"]})]})}function u(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},28453(e,t,n){n.d(t,{R:()=>o,x:()=>r});var a=n(96540);const s={},i=a.createContext(s);function o(e){const t=a.useContext(i);return a.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),a.createElement(i.Provider,{value:t},e.children)}}}]);
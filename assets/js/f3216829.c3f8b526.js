"use strict";(self.webpackChunkveezoo_docs=self.webpackChunkveezoo_docs||[]).push([[8216],{2956(e,n,t){t.d(n,{A:()=>i});const i="data:image/png;base64,dmVyc2lvbiBodHRwczovL2dpdC1sZnMuZ2l0aHViLmNvbS9zcGVjL3YxCm9pZCBzaGEyNTY6MDZkMjU3N2ZjNzc0N2QwMWFkNDY0YWM3MDFhMDIzMDk4NGZiNzQ5ZDZlZDc0NjA2MGM1YzA4MmU3N2UzMjUxNwpzaXplIDEyNzA0Cg=="},9289(e,n,t){t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"veezoo/getting-started/database-connections/connect-to-bigquery","title":"Connecting to Google BigQuery","description":"This guide walks you through connecting Veezoo to Google BigQuery. You\'ll learn how to set up the required IAM permissions, create a service account with a JSON key, and configure the connection in Veezoo. Before you begin, ensure you have access to a GCP project and the ability to create service accounts with the necessary BigQuery roles.","source":"@site/docs/veezoo/getting-started/database-connections/connect-to-bigquery.md","sourceDirName":"veezoo/getting-started/database-connections","slug":"/veezoo/getting-started/database-connections/google-bigquery","permalink":"/veezoo/getting-started/database-connections/google-bigquery","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Connecting to Google BigQuery","slug":"google-bigquery"},"sidebar":"veezoo","previous":{"title":"Connecting to Amazon Athena","permalink":"/veezoo/getting-started/database-connections/amazon-athena"},"next":{"title":"Connecting to Databricks","permalink":"/veezoo/getting-started/database-connections/databricks"}}');var s=t(74848),r=t(28453);const o={title:"Connecting to Google BigQuery",slug:"google-bigquery"},c=void 0,a={},d=[{value:"Required Permissions",id:"required-permissions",level:2},{value:"Creating a Service Account",id:"creating-a-service-account",level:2},{value:"Step 1: Navigate to Service Accounts",id:"step-1-navigate-to-service-accounts",level:3},{value:"Step 2: Create a new Service Account",id:"step-2-create-a-new-service-account",level:3},{value:"Step 3: Choose a name and ID for the Service Account",id:"step-3-choose-a-name-and-id-for-the-service-account",level:3},{value:"Step 4: Add the required permissions",id:"step-4-add-the-required-permissions",level:3},{value:"Step 5: Create a JSON key",id:"step-5-create-a-json-key",level:3},{value:"Step 6: Configure Veezoo",id:"step-6-configure-veezoo",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Permission Errors When Running Queries",id:"permission-errors-when-running-queries",level:3},{value:"Datasets Not Appearing",id:"datasets-not-appearing",level:3},{value:"Additional Resources",id:"additional-resources",level:3}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"This guide walks you through connecting Veezoo to Google BigQuery. You'll learn how to set up the required IAM permissions, create a service account with a JSON key, and configure the connection in Veezoo. Before you begin, ensure you have access to a GCP project and the ability to create service accounts with the necessary BigQuery roles."}),"\n",(0,s.jsx)(n.h2,{id:"required-permissions",children:"Required Permissions"}),"\n",(0,s.jsx)(n.p,{children:"Connecting to BigQuery requires a Service Account with a valid JSON key and the following IAM roles:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Role"}),(0,s.jsx)(n.th,{children:"Purpose"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.strong,{children:"BigQuery Data Viewer"})," (",(0,s.jsx)(n.code,{children:"roles/bigquery.dataViewer"}),")"]}),(0,s.jsx)(n.td,{children:"Read access to tables and views"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.strong,{children:"BigQuery Metadata Viewer"})," (",(0,s.jsx)(n.code,{children:"roles/bigquery.metadataViewer"}),")"]}),(0,s.jsx)(n.td,{children:"Access to dataset and table metadata"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.strong,{children:"BigQuery Job User"})," (",(0,s.jsx)(n.code,{children:"roles/bigquery.jobUser"}),")"]}),(0,s.jsx)(n.td,{children:"Permission to run queries (create jobs)"})]})]})]}),"\n",(0,s.jsxs)(n.admonition,{title:"Note on BigQuery User role",type:"info",children:[(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.strong,{children:"BigQuery User"})," (",(0,s.jsx)(n.code,{children:"roles/bigquery.user"}),") role is a broader role that includes job creation permissions. You can use either:"]}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"BigQuery Job User"})," (recommended for least-privilege access), or"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"BigQuery User"})," (if you prefer a single role that covers job creation)"]}),"\n"]}),(0,s.jsxs)(n.p,{children:["In some GCP configurations\u2014particularly when data access is granted at the dataset level rather than the project level\u2014the ",(0,s.jsx)(n.strong,{children:"BigQuery Job User"})," role is explicitly required to run queries."]})]}),"\n",(0,s.jsx)(n.h2,{id:"creating-a-service-account",children:"Creating a Service Account"}),"\n",(0,s.jsx)(n.h3,{id:"step-1-navigate-to-service-accounts",children:"Step 1: Navigate to Service Accounts"}),"\n",(0,s.jsxs)(n.p,{children:["Go to Google's Cloud Console and navigate to ",(0,s.jsx)(n.strong,{children:"IAM & Admin"})," \u2192 ",(0,s.jsx)(n.strong,{children:"Service Accounts"}),":"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"IAM &amp; Admin",src:t(53639).A+""})}),"\n",(0,s.jsx)(n.h3,{id:"step-2-create-a-new-service-account",children:"Step 2: Create a new Service Account"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Create service account",src:t(2956).A+""})}),"\n",(0,s.jsx)(n.h3,{id:"step-3-choose-a-name-and-id-for-the-service-account",children:"Step 3: Choose a name and ID for the Service Account"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Service account details",src:t(14581).A+""})}),"\n",(0,s.jsx)(n.h3,{id:"step-4-add-the-required-permissions",children:"Step 4: Add the required permissions"}),"\n",(0,s.jsxs)(n.p,{children:["Grant the Service Account the required roles listed above (",(0,s.jsx)(n.strong,{children:"BigQuery Data Viewer"}),", ",(0,s.jsx)(n.strong,{children:"BigQuery Metadata Viewer"}),", and ",(0,s.jsx)(n.strong,{children:"BigQuery Job User"})," or ",(0,s.jsx)(n.strong,{children:"BigQuery User"}),"):"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Service account access",src:t(62522).A+""})}),"\n",(0,s.jsx)(n.h3,{id:"step-5-create-a-json-key",children:"Step 5: Create a JSON key"}),"\n",(0,s.jsxs)(n.p,{children:["After creating the account, select it and go to ",(0,s.jsx)(n.strong,{children:"Keys"})," to create a new key:"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Service account keys",src:t(52355).A+""})}),"\n",(0,s.jsxs)(n.p,{children:["Choose ",(0,s.jsx)(n.strong,{children:"JSON"})," as the key format:"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Service account key",src:t(74024).A+""})}),"\n",(0,s.jsx)(n.h3,{id:"step-6-configure-veezoo",children:"Step 6: Configure Veezoo"}),"\n",(0,s.jsx)(n.p,{children:"Create a new Knowledge Graph in Veezoo and add all the necessary information:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"New Knowledge Graph",src:t(22417).A+""})}),"\n",(0,s.jsx)(n.p,{children:"The service account JSON key file you downloaded from GCP will look like this (with your actual values):"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "type": "service_account",\n  "project_id": "your-gcp-project-id",\n  "private_key_id": "abc123def456...",\n  "private_key": "-----BEGIN PRIVATE KEY-----\\nMIIEv...your-private-key...\\n-----END PRIVATE KEY-----\\n",\n  "client_email": "veezoo-bigquery@your-gcp-project-id.iam.gserviceaccount.com",\n  "client_id": "123456789012345678901",\n  "auth_uri": "https://accounts.google.com/o/oauth2/auth",\n  "token_uri": "https://oauth2.googleapis.com/token",\n  "auth_provider_x509_cert_url": "https://www.googleapis.com/oauth2/v1/certs",\n  "client_x509_cert_url": "https://www.googleapis.com/robot/v1/metadata/x509/veezoo-bigquery%40your-gcp-project-id.iam.gserviceaccount.com"\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Upload this JSON key file in the Veezoo configuration and set the ",(0,s.jsx)(n.strong,{children:"Location"})," field to match your BigQuery datasets (e.g., ",(0,s.jsx)(n.code,{children:"US"}),", ",(0,s.jsx)(n.code,{children:"EU"}),", or a specific region like ",(0,s.jsx)(n.code,{children:"us-east1"}),")."]}),"\n",(0,s.jsxs)(n.p,{children:["If the desired datasets are not shown, check the ",(0,s.jsx)(n.a,{href:"https://cloud.google.com/bigquery/docs/locations",children:"location"}),' of the datasets in the BigQuery console and add it to the "Location" field.']}),"\n",(0,s.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(n.h3,{id:"permission-errors-when-running-queries",children:"Permission Errors When Running Queries"}),"\n",(0,s.jsxs)(n.p,{children:["If you encounter errors like ",(0,s.jsx)(n.code,{children:"Access Denied: Project [project-id]: User does not have bigquery.jobs.create permission"})," or similar permission errors when trying to run queries:"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Verify the BigQuery Job User role is assigned"}),": Ensure the Service Account has the ",(0,s.jsx)(n.code,{children:"roles/bigquery.jobUser"})," role at the project level. This role is required to create and run query jobs."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Check where permissions are granted"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["If data access roles (Data Viewer, Metadata Viewer) are granted at the ",(0,s.jsx)(n.strong,{children:"dataset level"}),", the Job User role must still be granted at the ",(0,s.jsx)(n.strong,{children:"project level"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"Job creation permissions cannot be granted at the dataset level."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Organization policies"}),": Some GCP organizations have policies that restrict default permissions. Contact your GCP administrator to verify that the Service Account can create jobs in the project."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"datasets-not-appearing",children:"Datasets Not Appearing"}),"\n",(0,s.jsx)(n.p,{children:"If datasets are not visible in Veezoo:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Verify the Service Account has ",(0,s.jsx)(n.strong,{children:"BigQuery Metadata Viewer"})," access to the datasets."]}),"\n",(0,s.jsxs)(n.li,{children:["Check that the correct ",(0,s.jsx)(n.strong,{children:"Location"})," (region) is specified in Veezoo's connection settings."]}),"\n",(0,s.jsx)(n.li,{children:"Ensure the datasets exist and are not empty."}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"additional-resources",children:"Additional Resources"}),"\n",(0,s.jsxs)(n.p,{children:["For more information on BigQuery IAM roles, see the ",(0,s.jsx)(n.a,{href:"https://cloud.google.com/bigquery/docs/access-control",children:"Google Cloud BigQuery access control documentation"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},14581(e,n,t){t.d(n,{A:()=>i});const i="data:image/png;base64,dmVyc2lvbiBodHRwczovL2dpdC1sZnMuZ2l0aHViLmNvbS9zcGVjL3YxCm9pZCBzaGEyNTY6ZTI2NGYwOTVkODkyZjhjMjdjN2Y1MGQxZGRjYjQxZDlhNWUwMjU2YWQ3YWFiOWEyZDBiZGI3ZDI5NWY3YWQ3ZgpzaXplIDU0ODc0Cg=="},22417(e,n,t){t.d(n,{A:()=>i});const i="data:image/png;base64,dmVyc2lvbiBodHRwczovL2dpdC1sZnMuZ2l0aHViLmNvbS9zcGVjL3YxCm9pZCBzaGEyNTY6NjUxZDU1NmU5ZTU5OTkzMzljODI4YzkzNTRkOWY5NGQzNzEwNDZiNmQ4YzMxNDQyMDU4ZDMyYTM0NjAyMjU4NQpzaXplIDkwMzk5Cg=="},28453(e,n,t){t.d(n,{R:()=>o,x:()=>c});var i=t(96540);const s={},r=i.createContext(s);function o(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(r.Provider,{value:n},e.children)}},52355(e,n,t){t.d(n,{A:()=>i});const i="data:image/png;base64,dmVyc2lvbiBodHRwczovL2dpdC1sZnMuZ2l0aHViLmNvbS9zcGVjL3YxCm9pZCBzaGEyNTY6ZDZlZjE5NzE2MmI4Y2FhMTIzZTA5ZTZhM2Q4OTdhYTk0M2NiMTE4ZjhkNWY1ZjFhNDZhMjY5ZTNlYjIyNGQyMwpzaXplIDQ3MzQ4Cg=="},53639(e,n,t){t.d(n,{A:()=>i});const i="data:image/png;base64,dmVyc2lvbiBodHRwczovL2dpdC1sZnMuZ2l0aHViLmNvbS9zcGVjL3YxCm9pZCBzaGEyNTY6MzJmM2QwMGNhNDZjZTliMzc2NzM1MDcxZTQ2ZWQxNTA2NDMxMzVkNDljZjczMDdlZjc2YThmYmExMWIwZDVmMwpzaXplIDc5Nzc2Cg=="},62522(e,n,t){t.d(n,{A:()=>i});const i="data:image/png;base64,dmVyc2lvbiBodHRwczovL2dpdC1sZnMuZ2l0aHViLmNvbS9zcGVjL3YxCm9pZCBzaGEyNTY6OWYzMTE4NTZhM2FlMzM5YzZhNDViMTQ2ZjVlNjRjOThhN2M5MjE5OGQ3NWZiYTNhYjViZTUxNzc3ZDEzM2Q5MwpzaXplIDc0ODg4Cg=="},74024(e,n,t){t.d(n,{A:()=>i});const i="data:image/png;base64,dmVyc2lvbiBodHRwczovL2dpdC1sZnMuZ2l0aHViLmNvbS9zcGVjL3YxCm9pZCBzaGEyNTY6NGQyMTFlNjI2YjZkMjEwMTY0ZjJkMDMwNDFkMmRhZTQ4ZWRiZWRlMjVhZjdjYjQyNTJjYTA2OWUwOTE2YzQ0ZgpzaXplIDI5ODU2Cg=="}}]);
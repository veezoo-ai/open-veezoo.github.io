"use strict";(self.webpackChunkveezoo_docs=self.webpackChunkveezoo_docs||[]).push([[256],{4961(e,n,t){t.d(n,{A:()=>i});const i=t.p+"assets/images/studio-configuration-db-variables-6ee6f8d0a45ca7a9cf3cf6a791106e0b.png"},16924(e,n,t){t.d(n,{A:()=>i});const i=t.p+"assets/images/studio-create-variables-modal-1c4d32b2b3622a3cf33773e4b1904606.png"},24244(e,n,t){t.d(n,{A:()=>i});const i=t.p+"assets/images/studio-edit-variables-dab447a31ee758be6df5a65f3a195dec.png"},26965(e,n,t){t.d(n,{A:()=>i});const i=t.p+"assets/images/studio-tenant-access-24387b37b80867f98e0e5c3df9594a90.png"},28453(e,n,t){t.d(n,{R:()=>s,x:()=>r});var i=t(96540);const o={},a=i.createContext(o);function s(e){const n=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),i.createElement(a.Provider,{value:n},e.children)}},32045(e,n,t){t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"veezoo/embedded/embedded-guide","title":"Embedded Analytics with Veezoo","description":"Veezoo\'s Embedded Analytics offers an integration solution that enhances your applications with our sophisticated, natural language querying (NLQ) data analytics and visualization capabilities.","source":"@site/docs/veezoo/embedded/embedded-guide.md","sourceDirName":"veezoo/embedded","slug":"/veezoo/embedded/embedded-guide","permalink":"/veezoo/embedded/embedded-guide","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"Embedded Analytics with Veezoo","sidebar_position":1},"sidebar":"veezoo","previous":{"title":"Row-Level Permission","permalink":"/veezoo/authorization/row-level-permission"},"next":{"title":"Step-by-step Demo","permalink":"/veezoo/embedded/hyperstore-guide"}}');var o=t(74848),a=t(28453);t(86025);const s={title:"Embedded Analytics with Veezoo",sidebar_position:1},r=void 0,d={},l=[{value:"About",id:"about",level:2},{value:"Value Proposition",id:"value-proposition",level:3},{value:"Characteristics",id:"characteristics",level:3},{value:"1. Contact Us to Enable Embedded Analytics",id:"1-contact-us-to-enable-embedded-analytics",level:2},{value:"2. Configure Allowed Hosts",id:"2-configure-allowed-hosts",level:2},{value:"3. Configure a Public Key to setup JWT (JSON Web Tokens)",id:"3-configure-a-public-key-to-setup-jwt-json-web-tokens",level:2},{value:"4. Configure Tenants in Veezoo",id:"4-configure-tenants-in-veezoo",level:2},{value:"5. Provide Access to a Knowledge Graph for a Tenant",id:"5-provide-access-to-a-knowledge-graph-for-a-tenant",level:2},{value:"6. Publish Changes to Tenants",id:"6-publish-changes-to-tenants",level:2},{value:"7. Define Authorization Logic for Tenants",id:"7-define-authorization-logic-for-tenants",level:2},{value:"What are Variables?",id:"what-are-variables",level:3},{value:"Authorization over virtual_table",id:"authorization-over-virtual_table",level:3},{value:"Authorization over Database Connection",id:"authorization-over-database-connection",level:3},{value:"8. Configure Shared and Non-Shared Entities",id:"8-configure-shared-and-non-shared-entities",level:2},{value:"9. Embed Veezoo into Your Application",id:"9-embed-veezoo-into-your-application",level:2},{value:"JSON Web Token (JWT)",id:"json-web-token-jwt",level:3},{value:"iFrame",id:"iframe",level:3},{value:"Sample code",id:"sample-code",level:3},{value:"Testing Your Embedded Integration",id:"testing-your-embedded-integration",level:3},{value:"Browser Compatibility and Third-Party Cookies",id:"browser-compatibility-and-third-party-cookies",level:4},{value:"Authentication Conflicts",id:"authentication-conflicts",level:4},{value:"Recommended Testing Setup",id:"recommended-testing-setup",level:4},{value:"10. Message Passing between iFrame and Your Application",id:"10-message-passing-between-iframe-and-your-application",level:2},{value:"Receiving Messages from Veezoo",id:"receiving-messages-from-veezoo",level:3},{value:"Sending Messages to Veezoo",id:"sending-messages-to-veezoo",level:3},{value:"Conclusion",id:"conclusion",level:2}];function c(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:"Veezoo's Embedded Analytics offers an integration solution that enhances your applications with our sophisticated, natural language querying (NLQ) data analytics and visualization capabilities."}),"\n",(0,o.jsx)(n.h2,{id:"about",children:"About"}),"\n",(0,o.jsx)(n.h3,{id:"value-proposition",children:"Value Proposition"}),"\n",(0,o.jsx)(n.p,{children:"You can integrate Veezoo\u2019s conversational, Self-Service Analytics interface directly into your software or portal. With Embedded Veezoo, you give your users the flexibility to explore the data they want without making your software more complicated nor wasting development resources."}),"\n",(0,o.jsx)(n.p,{children:"Our robust security, permission, and multi-tenancy architecture ensures that your users or customers only have access to what they\u2019re allowed to see."}),"\n",(0,o.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,o.jsx)("iframe",{src:"https://player.vimeo.com/video/815040762?app_id=122963&h=8c11281837",width:"640",height:"360",style:{border:0},allow:"autoplay; fullscreen; picture-in-picture",allowFullScreen:!0})}),"\n",(0,o.jsx)(n.h3,{id:"characteristics",children:"Characteristics"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Seamless integration into your application for an improved user experience."}),"\n",(0,o.jsx)(n.li,{children:"Supports multi-tenant architectures, providing personalized data experiences."}),"\n",(0,o.jsx)(n.li,{children:"Utilizes JWT (JSON Web Tokens) for secure user authentication."}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"1-contact-us-to-enable-embedded-analytics",children:"1. Contact Us to Enable Embedded Analytics"}),"\n",(0,o.jsxs)(n.p,{children:["The first step is to ",(0,o.jsx)(n.a,{href:"https://www.veezoo.com/contact",children:"contact us"})," if you are interested in the embedded functionality of Veezoo. This feature is not part of the Free tier and comes with a tailored pricing on request."]}),"\n",(0,o.jsx)(n.h2,{id:"2-configure-allowed-hosts",children:"2. Configure Allowed Hosts"}),"\n",(0,o.jsxs)(n.p,{children:["On the ",(0,o.jsx)(n.em,{children:"Embedding Configuration"})," page, make sure the Toggle Switch is ON (Embedding is enabled)."]}),"\n",(0,o.jsx)(n.p,{children:"For secure embedding, you need to specify the allowed hosts in Veezoo's admin settings. This ensures that your Veezoo content is only accessible from your designated, trusted domains."}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Admin Embedded Configuration",src:t(38964).A+"",width:"1465",height:"1006"})}),"\n",(0,o.jsx)(n.h2,{id:"3-configure-a-public-key-to-setup-jwt-json-web-tokens",children:"3. Configure a Public Key to setup JWT (JSON Web Tokens)"}),"\n",(0,o.jsxs)(n.p,{children:["Veezoo supports ",(0,o.jsx)(n.a,{href:"/veezoo/single-sign-on/jwt",children:"JWT"})," for user authentication within Embedded Analytics. To enable secure access to relevant data and analytics, your application will have to generate a JWT on your server and pass it to Veezoo. For that to work, you will need to configure in Veezoo Admin the public key for a private key that will be used by your application to sign the token."]}),"\n",(0,o.jsx)(n.p,{children:"If you don't know how to create a key pair, follow the instructions provided in Veezoo Admin."}),"\n",(0,o.jsx)(n.h2,{id:"4-configure-tenants-in-veezoo",children:"4. Configure Tenants in Veezoo"}),"\n",(0,o.jsx)(n.p,{children:"Veezoo's Embedded Analytics supports multi-tenant architectures. A tenant corresponds usually to a customer of yours, which may have multiple users in your application. Veezoo needs to know about the existence of these tenants, so that when a user accesses Veezoo through your application it will access the Knowledge Graph with the right authorization logic."}),"\n",(0,o.jsxs)(n.p,{children:["To configure Tenants in Veezoo, go to ",(0,o.jsx)(n.a,{href:"https://app.veezoo.com/admin/embedded/tenants",children:"Veezoo Admin > Embedded > Tenants"}),"."]}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsx)(n.p,{children:"Currently these need to be manually added over the UI, but we plan to release a Veezoo Admin API to do this programatically."})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Admin Embedded Tenants",src:t(98159).A+"",width:"1480",height:"472"})}),"\n",(0,o.jsx)(n.p,{children:"You will have to give it a name and a Tenant ID, which is the ID your application uses to identify a tenant. This will be important for mapping a user to the right tenant as part of the JWT authentication."}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Admin Embedded Create Tenant",src:t(82414).A+"",width:"618",height:"370"})}),"\n",(0,o.jsx)(n.h2,{id:"5-provide-access-to-a-knowledge-graph-for-a-tenant",children:"5. Provide Access to a Knowledge Graph for a Tenant"}),"\n",(0,o.jsx)(n.p,{children:"Choose the Knowledge Graph that will be available for your tenants and configure Tenant Access in Studio."}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Studio &gt; Tenant Access",src:t(26965).A+"",width:"1699",height:"624"})}),"\n",(0,o.jsx)(n.p,{children:"Veezoo will generate a different view of the same Knowledge Graph for each tenant. You will still manage only the main Knowledge Graph, but in the next steps you will configure how the authorization logic works for each tenant. This way, users will see different data in their answers and dashboards and different entities in the AutoComplete."}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Studio &gt; Tenant Access &gt; Create",src:t(70152).A+"",width:"617",height:"236"})}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsx)(n.p,{children:"Currently these need to be manually added over the UI, but we plan to release a Veezoo Admin API to do this programatically."})}),"\n",(0,o.jsx)(n.h2,{id:"6-publish-changes-to-tenants",children:"6. Publish Changes to Tenants"}),"\n",(0,o.jsx)(n.p,{children:"While you develop your Knowledge Graph further, you will want to eventually publish the changes to your tenants."}),"\n",(0,o.jsxs)(n.p,{children:["To do that, you will have to 'update' them over the UI in ",(0,o.jsx)(n.code,{children:"Studio > Tenant Access"}),". Select which ones to update (or all) and click on ",(0,o.jsx)(n.code,{children:"Update"}),"."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Studio &gt; Tenant Access &gt; Update",src:t(77331).A+"",width:"1153",height:"334"})}),"\n",(0,o.jsx)(n.h2,{id:"7-define-authorization-logic-for-tenants",children:"7. Define Authorization Logic for Tenants"}),"\n",(0,o.jsx)(n.p,{children:"Veezoo supports granular control over data access through variables and row-level permissions. This allows you to define which rows of data within a KG are accessible by a specific tenant."}),"\n",(0,o.jsx)(n.h3,{id:"what-are-variables",children:"What are Variables?"}),"\n",(0,o.jsx)(n.p,{children:"You can think of variables as placeholders defined in the Knowledge Graph and which can have a different value assigned per tenant. These variables can be used in SQL queries or for the database connection, so you can tell Veezoo how to restrict the data for each tenant."}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsxs)(n.p,{children:["By default, you can already access the content of the variable ",(0,o.jsx)(n.code,{children:"veezoo.Tenant.Id"})," with the ID you've configured for your tenant in the step 4 above. This is the most common way to do row-level authorization for your tenants. But if you need to create other variables, follow the next steps."]})}),"\n",(0,o.jsx)(n.p,{children:"To create variables for your Knowledge Graph, you will have to create a new file of type 'Variable' in Studio."}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Studio &gt; Files &gt; Variables",src:t(33619).A+"",width:"301",height:"561"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Studio &gt; Files &gt; Variables &gt; Modal",src:t(16924).A+"",width:"458",height:"294"})}),"\n",(0,o.jsx)(n.p,{children:"Example content:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"variable company_id {\n  # Leave blank\n}\n\n# You can also have multiple in the same file\nvariable date_cutoff {\n  # Leave blank\n}\n"})}),"\n",(0,o.jsx)(n.p,{children:"If you declare a new variable, you will have to first publish these changes to your tenant views of the Knowledge Graph, before you are able to assign values. Follow the same steps as in the section 'Publish Changes to Tenants' above."}),"\n",(0,o.jsx)(n.p,{children:"Now you can assign a value to these variables for each tenant, incl. for the main Knowledge Graph, by going on the Tenant Access page and clicking on the pencil at the Variables column."}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Studio &gt; Tenant Access &gt; Variables",src:t(24244).A+"",width:"925",height:"197"})}),"\n",(0,o.jsx)(n.p,{children:"Now let's see how we can use these variables to restrict data access."}),"\n",(0,o.jsx)(n.h3,{id:"authorization-over-virtual_table",children:"Authorization over virtual_table"}),"\n",(0,o.jsxs)(n.p,{children:["With ",(0,o.jsx)(n.a,{href:"/vkl/db-layer/virtual-table",children:"virtual_table"})," you can define SQL with special templating to specify ",(0,o.jsx)(n.a,{href:"/veezoo/authorization/row-level-permission",children:"row-level authorization"})," needed for your tenants. Read the related articles linked to understand more about how to work with it."]}),"\n",(0,o.jsxs)(n.p,{children:["Here is how an example on how to use ",(0,o.jsx)(n.code,{children:"virtual_table"})," in combination with variables (e.g. ",(0,o.jsx)(n.code,{children:"veezoo.Tenant.Id"})," here) to restrict access to the data:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'db.storage.hiring_app {\n\n    virtual_table candidates {\n\n        identifier: "candidates"\n        \n        # Only show candidates from the current tenant (veezoo.Tenant.Id)\n        virtual_table_sql: \n         """\n            SELECT\n              *\n            FROM\n              candidates c\n            WHERE\n              c.company_id = ${quote(veezoo.Tenant.Id)}\n            """\n        \n        \n        column ID {\n            identifier: "ID"\n            is_primary_key: true\n            primitive_type: "varchar"\n        }\n\n        ...\n   }\n}\n'})}),"\n",(0,o.jsxs)(n.p,{children:["In this case, we used the default ",(0,o.jsx)(n.code,{children:"veezoo.Tenant.Id"}),", which comes pre-defined. But you could have used any other variable that you've defined in the Knowledge Graph as well."]}),"\n",(0,o.jsx)(n.h3,{id:"authorization-over-database-connection",children:"Authorization over Database Connection"}),"\n",(0,o.jsx)(n.p,{children:"Alternatively, you may have a different way of handling your customer's data. One common approach is to have separate schemas for each client."}),"\n",(0,o.jsxs)(n.p,{children:["Veezoo allows you to configure this by using variables in the ",(0,o.jsx)(n.code,{children:"Configuration > Database Connection"}),"."]}),"\n",(0,o.jsx)(n.p,{children:"Here is an example using MySQL:"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Studio &gt; Configuration &gt; Database Connection",src:t(4961).A+"",width:"920",height:"992"})}),"\n",(0,o.jsx)(n.h2,{id:"8-configure-shared-and-non-shared-entities",children:"8. Configure Shared and Non-Shared Entities"}),"\n",(0,o.jsxs)(n.p,{children:["Once you've configured the authorization logic for the tenants, you will want to check which ",(0,o.jsx)(n.a,{href:"/vkl/kb-layer/entity",children:"Entities"})," should be shared / common to all tenants and which ones are tenant-specific."]}),"\n",(0,o.jsxs)(n.p,{children:["As an example, let's say you have an HR application with information about the hiring process, where there is a status for it. It could be that ",(0,o.jsx)(n.code,{children:"Status"})," is a class with entities that are common to all tenants. In this case, you don't have to do anything specifically for it."]}),"\n",(0,o.jsxs)(n.p,{children:["But let's say you have another class called ",(0,o.jsx)(n.code,{children:"Candidate"}),". In this case, each tenant will want to see its own candidates. For that, apart from configuring the authorization logic described in the previous section, you will have to delete the entities of the class ",(0,o.jsx)(n.code,{children:"Candidate"})," and select it as a class to be synced (cf. ",(0,o.jsx)(n.a,{href:"/veezoo/sync/kg-sync",children:"Knowledge Graph Synchronization"}),")."]}),"\n",(0,o.jsx)(n.p,{children:'Don\'t forget to "Update" the tenant Knowledge Graphs as described in step 6.'}),"\n",(0,o.jsx)(n.h2,{id:"9-embed-veezoo-into-your-application",children:"9. Embed Veezoo into Your Application"}),"\n",(0,o.jsx)(n.p,{children:"You can integrate Veezoo into your software by incorporating an iframe that points to Veezoo's domain and uses the generated JWT for user authentication."}),"\n",(0,o.jsx)(n.h3,{id:"json-web-token-jwt",children:"JSON Web Token (JWT)"}),"\n",(0,o.jsx)(n.p,{children:"To embed Veezoo into your application, you will first need to generate a JSON web token (JWT). This token will then be included in the URL used to load the Veezoo interface into an iframe."}),"\n",(0,o.jsxs)(n.p,{children:["The JWT makes use of the following ",(0,o.jsx)(n.strong,{children:"claims"}),":"]}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Key"}),(0,o.jsx)(n.th,{children:"Name"}),(0,o.jsx)(n.th,{children:"Required"}),(0,o.jsx)(n.th,{children:"Description"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"iat"})}),(0,o.jsx)(n.td,{children:"Issued at"}),(0,o.jsx)(n.td,{children:"required"}),(0,o.jsx)(n.td,{children:"Identifies the time at which the JWT was issued"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"exp"})}),(0,o.jsx)(n.td,{children:"Expiration time"}),(0,o.jsx)(n.td,{children:"required"}),(0,o.jsx)(n.td,{children:"Identifies the expiration time on and after which the JWT must not be accepted for processing"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"jti"})}),(0,o.jsx)(n.td,{children:"JWT ID"}),(0,o.jsx)(n.td,{children:"required"}),(0,o.jsx)(n.td,{children:"A unique identifier for the JWT to avoid replay attacks"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"tenantId"})}),(0,o.jsx)(n.td,{children:"Tenant ID"}),(0,o.jsx)(n.td,{children:"required"}),(0,o.jsx)(n.td,{children:"The ID of the tenant in Veezoo the user belongs to"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"sub"})}),(0,o.jsx)(n.td,{children:"Subject"}),(0,o.jsx)(n.td,{children:"required"}),(0,o.jsx)(n.td,{children:"Identifies the subject of the JWT, i.e. the user to be authenticated"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"email"})}),(0,o.jsx)(n.td,{children:"Email"}),(0,o.jsx)(n.td,{children:"required"}),(0,o.jsx)(n.td,{children:"The email address of the user"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"firstName"})}),(0,o.jsx)(n.td,{children:"First Name"}),(0,o.jsx)(n.td,{children:"required"}),(0,o.jsx)(n.td,{children:"The first name of the user"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"lastName"})}),(0,o.jsx)(n.td,{children:"Last Name"}),(0,o.jsx)(n.td,{children:"required"}),(0,o.jsx)(n.td,{children:"The last name of the user"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"language"})}),(0,o.jsx)(n.td,{children:"Language"}),(0,o.jsx)(n.td,{children:"optional"}),(0,o.jsxs)(n.td,{children:["The default language of the user, specified as a ",(0,o.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/IETF_language_tag",children:"BCP 47 language tag"})," (currently supported are ",(0,o.jsx)(n.code,{children:"en-US"}),", ",(0,o.jsx)(n.code,{children:"de-DE"}),", ",(0,o.jsx)(n.code,{children:"fr-FR"}),", ",(0,o.jsx)(n.code,{children:"it-IT"})," and ",(0,o.jsx)(n.code,{children:"pt-BR"}),")."]})]})]})]}),"\n",(0,o.jsxs)(n.p,{children:["The JWT needs to be ",(0,o.jsx)(n.strong,{children:"signed"})," with the ",(0,o.jsx)(n.strong,{children:"RSA private key"})," from the public/private key pair of which you have configured the public key in Veezoo Admin."]}),"\n",(0,o.jsx)(n.h3,{id:"iframe",children:"iFrame"}),"\n",(0,o.jsx)(n.p,{children:"To embed Veezoo in your application, you will need to include an iframe in your application's HTML code. The iframe must point to Veezoo using your subdomain and include the JWT in the URL:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:'<iframe src="https://<subdomain>.app.veezoo.com?jwt=<jwt>&embedded=true"></iframe>\n'})}),"\n",(0,o.jsx)(n.h3,{id:"sample-code",children:"Sample code"}),"\n",(0,o.jsxs)(n.p,{children:["Here's a simplified example of how to accomplish this using Python and Flask (you will need the libraries ",(0,o.jsx)(n.em,{children:"cryptography"})," and ",(0,o.jsx)(n.em,{children:"pyjwt"}),", both of which you can get via ",(0,o.jsx)(n.em,{children:"pip"}),"):"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'from flask import Flask, render_template\nimport jwt\nfrom datetime import datetime, timedelta\nimport uuid\n\napp = Flask(__name__)\n\ndef generate_jwt(payload, private_key, expiration_minutes=5):\n    headers = {\n        "typ": "JWT",\n        "alg": "RS256"\n    }\n\n    # Update the payload with "iat" and "exp" claims\n    iat = datetime.utcnow()\n    exp = iat + timedelta(minutes=expiration_minutes)\n    payload.update({\n        "iat": iat,\n        "exp": exp,\n    })\n\n    # Generate JWT\n    encoded_jwt = jwt.encode(payload, private_key, algorithm="RS256", headers=headers)    \n    return encoded_jwt\n\n@app.route("/")\ndef home():\n    jti = uuid.uuid1()\n    payload = {\n        "tenantId": "64bc23cc-cc6e-4387-9f7d-fc125b132895",\n        "jti": jti,\n        "sub": "a529a344-7b43-46e1-bd56-2a722abd683b",\n        "email": "john.doe@company.com",\n        "firstName": "John",\n        "lastName": "Doe",\n        "language": "en-US",\n    }\n\n    # Note: private_key should be a string in PEM format. It typically starts with\n    # \'-----BEGIN PRIVATE KEY-----\' and ends with \'-----END PRIVATE KEY-----\'.\n    private_key = "<your-private-key-here>"\n    jwt = generate_jwt(payload, private_key)\n\n    # substitute \'company\' by your Veezoo subdomain\n    veezoo_url = f"https://company.app.veezoo.com?jwt={jwt}&embedded=true"\n\n    return render_template("index.html", veezoo_url=veezoo_url)\n'})}),"\n",(0,o.jsxs)(n.p,{children:["In this example, your ",(0,o.jsx)(n.code,{children:"index.html"})," file, placed in the ",(0,o.jsx)(n.code,{children:"templates"})," directory, would look something like this:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:'<html>\n  <body style="background-color: #f8f8f8; margin: 0; display: flex; align-items: center; justify-content: center; padding: 50px;">\n    <iframe\n      id="veezoo-iframe"\n      src="{{ veezoo_url }}"\n      frameborder="0"\n      style="width: 100%; height: 100%; border: 1px solid #ddd;"\n    >\n    </iframe>\n  </body>\n</html>\n'})}),"\n",(0,o.jsx)(n.h3,{id:"testing-your-embedded-integration",children:"Testing Your Embedded Integration"}),"\n",(0,o.jsx)(n.p,{children:"When testing your embedded Veezoo integration, there are several important considerations to ensure a smooth testing experience:"}),"\n",(0,o.jsx)(n.h4,{id:"browser-compatibility-and-third-party-cookies",children:"Browser Compatibility and Third-Party Cookies"}),"\n",(0,o.jsx)(n.p,{children:"Embedded Veezoo requires third-party cookies to be enabled in your browser. This means that the following will break the embedding:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Incognito/Private mode"}),": Most browsers block third-party cookies by default in incognito or private browsing mode, which will prevent embedded Veezoo from working properly."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Safari"}),": By default, Safari has strict third-party cookie policies that may interfere with embedded functionality."]}),"\n"]}),"\n",(0,o.jsx)(n.h4,{id:"authentication-conflicts",children:"Authentication Conflicts"}),"\n",(0,o.jsx)(n.p,{children:"If you're logged into Veezoo in the same browser session where you're testing JWT authentication, this can cause authentication conflicts and unexpected behavior."}),"\n",(0,o.jsx)(n.h4,{id:"recommended-testing-setup",children:"Recommended Testing Setup"}),"\n",(0,o.jsxs)(n.p,{children:["To avoid these issues, we recommend using ",(0,o.jsx)(n.strong,{children:"separate browser profiles"})," for testing."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Chrome Example:"})}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Create a new Chrome profile specifically for testing embedded Veezoo"}),"\n",(0,o.jsx)(n.li,{children:"In this profile, ensure third-party cookies are enabled"}),"\n",(0,o.jsx)(n.li,{children:"Do not log into Veezoo directly in this profile - only test the embedding"}),"\n",(0,o.jsx)(n.li,{children:"Use your regular browser profile for normal access to Veezoo"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"10-message-passing-between-iframe-and-your-application",children:"10. Message Passing between iFrame and Your Application"}),"\n",(0,o.jsxs)(n.p,{children:["Veezoo's Embedded Analytics also supports message passing between the iFrame embedding Veezoo and your application, leveraging JavaScript's ",(0,o.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage",children:"Window.postMessage()"})," method for cross-document messaging."]}),"\n",(0,o.jsx)(n.h3,{id:"receiving-messages-from-veezoo",children:"Receiving Messages from Veezoo"}),"\n",(0,o.jsx)(n.p,{children:"The following code shows how you can listen to messages from Veezoo:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"window.addEventListener('message', event => {\n  // check the event's origin in order only to process messages sent by Veezoo\n  if (event.origin === 'https://<subdomain>.app.veezoo.com') {\n    const message = event.data;\n    if (message.type === '<type>') {\n      // process message of type <type>\n    }\n  }\n});\n"})}),"\n",(0,o.jsx)(n.p,{children:"Veezoo currently sends the following messages:"}),"\n",(0,o.jsxs)("table",{children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Type"}),(0,o.jsx)("th",{children:"Description"}),(0,o.jsx)("th",{children:"Example"})]})}),(0,o.jsx)("tbody",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsx)("code",{children:"boards"})}),(0,o.jsxs)("td",{children:[(0,o.jsx)(n.p,{children:"Provides information about the dashboards which are available to the user. Contains the following data:"}),(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"boards"}),(0,o.jsx)(n.br,{}),"\n","an array of board objects"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"boards[*].id"}),(0,o.jsx)(n.br,{}),"\n","the ID of the board"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"boards[*].name"}),(0,o.jsx)(n.br,{}),"\n","the name of the board"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"boards[*].isOwned"}),"\nspecifies whether the board is owned by the user or shared with them"]}),"\n"]})]}),(0,o.jsx)("td",{children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n  "type": "boards",\n  "boards": [\n    {\n      "id": "b56bd191-7a22-4ba6-8703-b26ee7fd719a",\n      "name": "Sales 360",\n      "isOwned": true\n    },\n    ...\n  ]\n}\n'})})})]})})]}),"\n",(0,o.jsx)(n.h3,{id:"sending-messages-to-veezoo",children:"Sending Messages to Veezoo"}),"\n",(0,o.jsx)(n.p,{children:"The following code shows how you can send messages to Veezoo:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"// replace <id> with the ID of your Veezoo iframe\nconst veezooIframe = document.getElementById('<id>');\nconst message = {\n  type: \"<type>\",\n  // provide additional data\n  ...\n};\nveezooIframe.contentWindow.postMessage(message, '*');\n"})}),"\n",(0,o.jsx)(n.p,{children:"Veezoo currently accepts the following messages:"}),"\n",(0,o.jsxs)("table",{children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Type"}),(0,o.jsx)("th",{children:"Description"}),(0,o.jsx)("th",{children:"Example"})]})}),(0,o.jsxs)("tbody",{children:[(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsx)("code",{children:"openBoard"})}),(0,o.jsxs)("td",{children:[(0,o.jsx)(n.p,{children:"Opens a board in the chat. Provide the following data:"}),(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"boardId"}),(0,o.jsx)(n.br,{}),"\n","the ID of the board to open"]}),"\n"]})]}),(0,o.jsx)("td",{children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n  type: "openBoard",\n  boardId: "b56bd191-7a22-4ba6-8703-b26ee7fd719a"\n}\n'})})})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsx)("code",{children:"setLanguage"})}),(0,o.jsxs)("td",{children:[(0,o.jsx)(n.p,{children:"Sets the language of the knowledge graph. Provide the following data:"}),(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"language"}),(0,o.jsx)(n.br,{}),"\n","the language to set for the knowledge graph, specified as a ",(0,o.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/IETF_language_tag",children:"BCP 47 language tag"})]}),"\n"]})]}),(0,o.jsx)("td",{children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n  type: "setLanguage",\n  language: "de-DE"\n}\n'})})})]})]})]}),"\n",(0,o.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,o.jsx)(n.p,{children:"With Veezoo's Embedded Analytics, you can enhance the value of your application by providing an integrated, dynamic, and interactive data analytics experience, powered by our sophisticated NLQ capabilities. This ensures your users have immediate access to insights and data-driven decision-making tools right within your application, improving user engagement and overall satisfaction."}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsxs)(n.p,{children:["If you encounter any issues or have questions about embedding Veezoo into your application, don't hesitate to ",(0,o.jsx)(n.a,{href:"https://www.veezoo.com/contact",children:"contact us"})," for support."]})})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},33619(e,n,t){t.d(n,{A:()=>i});const i=t.p+"assets/images/studio-create-variables-a91a7383cf0bf2cae25247cd9726a030.png"},38964(e,n,t){t.d(n,{A:()=>i});const i=t.p+"assets/images/admin-embedded-config-23661a1ca8245c2a00b89c62f0fabfab.png"},70152(e,n,t){t.d(n,{A:()=>i});const i=t.p+"assets/images/studio-create-tenant-kg-4875831d0e540af7b98c0537387681ca.png"},77331(e,n,t){t.d(n,{A:()=>i});const i=t.p+"assets/images/studio-update-tenants-e3c7288c92fb0c338a64be67110d50e3.png"},82414(e,n,t){t.d(n,{A:()=>i});const i=t.p+"assets/images/admin-embedded-create-tenant-48815cc929a93ccab6edeb1a35939e4c.png"},98159(e,n,t){t.d(n,{A:()=>i});const i=t.p+"assets/images/admin-embedded-tenants-36358332ca208aa84016b19220dfd87b.png"}}]);